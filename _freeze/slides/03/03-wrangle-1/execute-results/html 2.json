{
  "hash": "6300e83516e130b7882b0c5964df0476",
  "result": {
    "markdown": "---\ntitle: Data wrangling - I\nsubtitle: Lecture 3\ntitle-slide-attributes:\n  data-background-image: ../vizdata-bg.png\n  data-background-size: 800px, cover\n  data-slide-number: none\nformat: revealjs\nhighlight-style: a11y\nexecute:\n  code-link: true\neditor_options: \n  chunk_output_type: console\n---\n\n\n\n# Warm up\n\n## Announcements\n\n-   HW 1 due Monday, Jan 29 at 11:59pm, make sure all checks are passing!\n-   See #random on Slack for playlist request\n-   Office Hours: Come with questions on HW 1, particularly Questions 1-4.\n\n## Setup {.smaller}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# load packages\nlibrary(tidyverse)\nlibrary(glue)\nlibrary(lubridate)\nlibrary(scales)\nlibrary(countdown)\n\n# set theme for ggplot2\nggplot2::theme_set(ggplot2::theme_minimal(base_size = 14))\n\n# set width of code output\noptions(width = 65)\n\n# set figure parameters for knitr\nknitr::opts_chunk$set(\n  fig.width = 7,        # 7\" width\n  fig.asp = 0.618,      # the golden ratio\n  fig.retina = 3,       # dpi multiplier for displaying HTML output on retina\n  fig.align = \"center\", # center align figures\n  dpi = 300             # higher dpi, sharper image\n)\n```\n:::\n\n\n\n# Transforming and reshaping a single data frame\n\n## Data: Hotel bookings\n\n-   Data from two hotels: one resort and one city hotel\n-   Observations: Each row represents a hotel booking\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nhotels <- read_csv(\"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-02-11/hotels.csv\")\n```\n:::\n\n\n\n## Scenario 1\n\n::: hand\nWe...\n\nhave a single data frame\n\nwant to slice it, and dice it, and juice it, and process it, so we can plot it\n:::\n\n## dplyr 101\n\n::: task\nWhich of the following (if any) are unfamiliar to you?\n:::\n\n-   `distinct()`\n-   `select()`, `relocate()`\n-   `arrange()`, `arrange(desc())`\n-   `slice()`, `slice_head()`, `slice_tail()`, `slice_sample()`\n-   `filter()`\n-   `mutate()`\n-   `summarise()`, `count()`\n\n## Average cost of daily stay\n\n::: task\nLet's recreate this visualization!\n:::\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](03-wrangle-1_files/figure-html/daily-stay-cost-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n\n## Livecoding {.smaller}\n\nReveal below for code developed during live coding session.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\"}\nhotels |>\n  mutate(\n    arrival_date = glue::glue(\"{arrival_date_year}-{arrival_date_month}-{arrival_date_day_of_month}\"),\n    arrival_date = ymd(arrival_date)\n    ) |>\n  group_by(hotel, arrival_date) |>\n  summarise(mean_adr = mean(adr), .groups = \"drop\") |>\n  ggplot(aes(x = arrival_date, y = mean_adr, group = hotel, color = hotel)) +\n  geom_line() +\n  scale_color_manual(values = c(\"cornsilk4\", \"deepskyblue3\")) +\n  scale_y_continuous(labels = label_dollar()) +\n  labs(\n    x = \"Arrival date\",\n    y = \"Mean average\\ndaily rate (USD)\",\n    color = NULL,\n    title = \"Cost of daily hotel stay\",\n    subtitle = \"July 2015 to August 2017\",\n    caption = \"Source: Antonio, Almeida and Nunes (2019) | TidyTuesday\"\n  ) +\n  theme(\n    legend.position = c(0.15, 0.9),\n    legend.box.background = element_rect(fill = \"white\",\n                                         color = \"white\"),\n    plot.subtitle = element_text(color = \"cornsilk4\"),\n    plot.caption = element_text(color = \"cornsilk4\")\n  )\n```\n:::\n",
    "supporting": [
      "03-wrangle-1_files/figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}