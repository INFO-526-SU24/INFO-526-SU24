{
  "hash": "6524c0fc4004c0fa4a51c46b7d98bf3d",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Data wrangling - I\nsubtitle: Lecture 3\ntitle-slide-attributes:\n  data-background-image: ../vizdata-bg.png\n  data-background-size: 800px, cover\n  data-slide-number: none\nformat: revealjs\nhighlight-style: a11y\nexecute:\n  code-link: true\neditor_options: \n  chunk_output_type: console\n---\n\n\n## Setup {.smaller}\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# load packages\nlibrary(tidyverse)\nlibrary(glue)\nlibrary(scales)\nlibrary(countdown)\n\n# set theme for ggplot2\nggplot2::theme_set(ggplot2::theme_minimal(base_size = 14))\n\n# set width of code output\noptions(width = 65)\n\n# set figure parameters for knitr\nknitr::opts_chunk$set(\n  fig.width = 7,        # 7\" width\n  fig.asp = 0.618,      # the golden ratio\n  fig.retina = 3,       # dpi multiplier for displaying HTML output on retina\n  fig.align = \"center\", # center align figures\n  dpi = 300             # higher dpi, sharper image\n)\n```\n:::\n\n\n# Transforming and reshaping a single data frame\n\n## Data: Hotel bookings\n\n-   Data from two hotels: one resort and one city hotel\n-   Observations: Each row represents a hotel booking\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nhotels <- read_csv(\"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-02-11/hotels.csv\")\n```\n:::\n\n\n## Scenario 1\n\n::: hand\nWe...\n\nhave a single data frame\n\nwant to slice it, and dice it, and juice it, and process it, so we can plot it\n:::\n\n## dplyr 101\n\n::: task\nWhich of the following (if any) are unfamiliar to you?\n:::\n\n-   [`distinct()`](https://dplyr.tidyverse.org/reference/distinct.html)\n-   [`select()`](https://dplyr.tidyverse.org/reference/select.html), [`relocate()`](https://dplyr.tidyverse.org/reference/relocate.html)\n-   [`arrange()`](https://dplyr.tidyverse.org/reference/arrange.html), [`arrange(desc())`](https://dplyr.tidyverse.org/reference/desc.html)\n-   [`slice()`](https://dplyr.tidyverse.org/reference/slice.html), `slice_head()`, `slice_tail()`, `slice_sample()`\n-   [`filter()`](https://dplyr.tidyverse.org/reference/filter.html)\n-   [`mutate()`](https://dplyr.tidyverse.org/reference/mutate.html)\n-   [`summarise()`](https://dplyr.tidyverse.org/reference/summarise.html), [`count()`](https://dplyr.tidyverse.org/reference/count.html)\n\n## Average cost of daily stay\n\n::: task\nLet's recreate this visualization!\n:::\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](03-wrangle-1_files/figure-revealjs/daily-stay-cost-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n## Livecoding {.smaller}\n\nReveal below for code developed during live coding session.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\"}\nhotels |>\n  mutate(\n    arrival_date = glue::glue(\"{arrival_date_year}-{arrival_date_month}-{arrival_date_day_of_month}\"),\n    arrival_date = ymd(arrival_date)\n    ) |>\n  group_by(hotel, arrival_date) |>\n  summarise(mean_adr = mean(adr), .groups = \"drop\") |>\n  ggplot(aes(x = arrival_date, y = mean_adr, group = hotel, color = hotel)) +\n  geom_line() +\n  scale_color_manual(values = c(\"cornsilk4\", \"deepskyblue3\")) +\n  scale_y_continuous(labels = label_dollar()) +\n  labs(\n    x = \"Arrival date\",\n    y = \"Mean average\\ndaily rate (USD)\",\n    color = NULL,\n    title = \"Cost of daily hotel stay\",\n    subtitle = \"July 2015 to August 2017\",\n    caption = \"Source: Antonio, Almeida and Nunes (2019) | TidyTuesday\"\n  ) +\n  theme(\n    legend.position = c(0.15, 0.9),\n    legend.box.background = element_rect(fill = \"white\",\n                                         color = \"white\"),\n    plot.subtitle = element_text(color = \"cornsilk4\"),\n    plot.caption = element_text(color = \"cornsilk4\")\n  )\n```\n:::\n",
    "supporting": [
      "03-wrangle-1_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}